// Main Showcase Application Component
// Slint 1.14 Web Capabilities Showcase

import { Button, VerticalBox, HorizontalBox, GridBox } from "std-widgets.slint";

export component App {
    in property <string> title: "Slint 1.14 Web Capabilities";
    in property <string> version: "1.14.0";
    
    // Navigation state
    in-out property <string> current-page: "home";
    in-out property <string> selected-demo: "";
    
    // Demo categories
    in property <[Category]> categories: [
        { id: "interactive", name: "Interactive Demos", description: "Hands-on demonstrations", icon: "ðŸŽ®" },
        { id: "performance", name: "Performance", description: "Speed and efficiency", icon: "âš¡" },
        { id: "responsive", name: "Responsive Design", description: "Adapt to any screen", icon: "ðŸ“±" },
        { id: "accessibility", name: "Accessibility", description: "Inclusive by design", icon: "â™¿" }
    ];
    
    // Available demos
    in property <[Demo]> demos: [
        { id: "counter", title: "Counter", category: "interactive", difficulty: "beginner" },
        { id: "button-states", title: "Button States", category: "interactive", difficulty: "beginner" },
        { id: "slider", title: "Interactive Slider", category: "interactive", difficulty: "beginner" },
        { id: "text-input", title: "Text Input", category: "interactive", difficulty: "intermediate" },
        { id: "checkbox", title: "Checkbox Group", category: "interactive", difficulty: "beginner" },
        { id: "animations", title: "Smooth Animations", category: "performance", difficulty: "intermediate" },
        { id: "layout-grid", title: "Responsive Grid", category: "responsive", difficulty: "intermediate" },
        { id: "keyboard-nav", title: "Keyboard Navigation", category: "accessibility", difficulty: "beginner" }
    ];
    
    // Performance metrics
    in property <[Metric]> metrics: [
        { name: "Startup Time", value: "45ms", baseline: "React", baseline-value: "120ms", unit: "ms" },
        { name: "Memory Usage", value: "156KB", baseline: "React", baseline-value: "450KB", unit: "KB" },
        { name: "Frame Rate", value: "60", baseline: "Vue", baseline-value: "58", unit: "fps" },
        { name: "Bundle Size", value: "245KB", baseline: "Qwik", baseline-value: "320KB", unit: "KB" }
    ];
    
    // State for interactions
    in-out property <int> counter-value: 0;
    in-out property <string> slider-value: "50";
    in-out property <string> text-input-value: "";
    in-out property <bool> checkbox-checked: false;
    
    callback navigate-to-page(string);
    callback select-demo(string);
    callback increment-counter();
    callback reset-demo();
    
    // Visual feedback animation trigger
    property <bool> feedback-anim: false;
    
    // Main layout
    Rectangle {
        background: #f5f5f5;
        
        VerticalBox {
            spacing: 16px;
            padding: 24px;
            
            // Header
            HorizontalBox {
                height: 60px;
                background: linear-gradient(90deg, #2563eb, #7c3aed);
                padding: 0;
                
                Text {
                    text: title + " v" + version;
                    color: white;
                    font-size: 24px;
                    font-weight: Bold;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                }
            }
            
            // Content Area
            VerticalBox {
                spacing: 16px;
                flex-grow: 1;
                
                // Navigation Tabs
                HorizontalBox {
                    height: 48px;
                    spacing: 8px;
                    
                    for category in categories: Button {
                        text: category.name;
                        primary: true;
                        clicked => { root.navigate-to-page(category.id); }
                    }
                }
                
                // Dynamic Content
                VerticalBox {
                    background: white;
                    border-radius: 8px;
                    padding: 16px;
                    shadow: 2px;
                    
                    if current-page == "home": HomeView {
                        categories: root.categories;
                        demos: root.demos;
                        metrics: root.metrics;
                        on-select-demo(id) => { root.select-demo(id); }
                    }
                    
                    if current-page == "interactive": InteractiveDemosView {
                        counter-value: root.counter-value;
                        slider-value: root.slider-value;
                        text-input-value: root.text-input-value;
                        checkbox-checked: root.checkbox-checked;
                        on-increment-counter => { root.increment-counter(); }
                    }
                    
                    if current-page == "performance": PerformanceView {
                        metrics: root.metrics;
                    }
                    
                    if current-page == "responsive": ResponsiveView {
                        
                    }
                    
                    if current-page == "accessibility": AccessibilityView {
                        
                    }
                }
            }
            
            // Footer
            HorizontalBox {
                height: 32px;
                background: #f0f0f0;
                Text {
                    text: "Built with Slint 1.14 | slint.dev";
                    color: #666;
                    font-size: 12px;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                }
            }
        }
    }
}

// Home View Component
export component HomeView {
    in property <[Category]> categories;
    in property <[Demo]> demos;
    in property <[Metric]> metrics;
    
    callback select-demo(string);
    
    VerticalBox {
        spacing: 16px;
        
        Text {
            text: "Welcome to the Slint 1.14 Showcase";
            font-size: 20px;
            font-weight: Bold;
        }
        
        Text {
            text: "Explore interactive demonstrations of Slint's web capabilities. Click on any category or demo to learn more.";
            wrap: word-wrap;
            color: #666;
        }
        
        // Categories Grid
        GridBox {
            rows: 2;
            columns: 2;
            spacing: 12px;
            
            for category in categories: Rectangle {
                background: #f8f9fa;
                border-radius: 8px;
                padding: 16px;
                shadow: 1px;
                
                VerticalBox {
                    Text {
                        text: category.icon;
                        font-size: 32px;
                        horizontal-alignment: center;
                    }
                    
                    Text {
                        text: category.name;
                        font-weight: SemiBold;
                        horizontal-alignment: center;
                    }
                    
                    Text {
                        text: category.description;
                        font-size: 12px;
                        color: #666;
                        horizontal-alignment: center;
                    }
                }
            }
        }
        
        // Quick Stats
        HorizontalBox {
            spacing: 24px;
            
            for metric in metrics: Rectangle {
                background: linear-gradient(135deg, #e0f2fe, #f0f9ff);
                border-radius: 8px;
                padding: 12px;
                width: 120px;
                
                VerticalBox {
                    Text {
                        text: metric.value;
                        font-size: 24px;
                        font-weight: Bold;
                        color: #2563eb;
                        horizontal-alignment: center;
                    }
                    
                    Text {
                        text: metric.name;
                        font-size: 11px;
                        color: #666;
                        horizontal-alignment: center;
                    }
                    
                    Text {
                        text: "vs " + metric.baseline;
                        font-size: 10px;
                        color: #059669;
                        horizontal-alignment: center;
                    }
                }
            }
        }
    }
}

// Interactive Demos View
export component InteractiveDemosView {
    in-out property <int> counter-value;
    in-out property <string> slider-value;
    in-out property <string> text-input-value;
    in-out property <bool> checkbox-checked;
    
    callback on-increment-counter();
    
    VerticalBox {
        spacing: 16px;
        
        Text {
            text: "Interactive Demonstrations";
            font-size: 18px;
            font-weight: SemiBold;
        }
        
        // Counter Demo
        Rectangle {
            background: #fef3c7;
            border-radius: 8px;
            padding: 16px;
            
            VerticalBox {
                Text {
                    text: "Counter Demo";
                    font-weight: SemiBold;
                }
                
                Text {
                    text: "Click the button to increment:";
                    font-size: 14px;
                    color: #666;
                }
                
                HorizontalBox {
                    Button {
                        text: "+";
                        primary: true;
                        clicked => { 
                            counter-value += 1; 
                            on-increment-counter();
                        }
                    }
                    
                    Text {
                        text: counter-value;
                        font-size: 32px;
                        font-weight: Bold;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                }
            }
        }
        
        // Slider Demo
        Rectangle {
            background: #dbeafe;
            border-radius: 8px;
            padding: 16px;
            
            VerticalBox {
                Text {
                    text: "Slider Demo";
                    font-weight: SemiBold;
                }
                
                HorizontalBox {
                    Text {
                        text: "Value:";
                    }
                    
                    Text {
                        text: slider-value;
                        font-weight: Bold;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                }
            }
        }
    }
}

// Performance View
export component PerformanceView {
    in property <[Metric]> metrics;
    
    VerticalBox {
        spacing: 16px;
        
        Text {
            text: "Performance Metrics";
            font-size: 18px;
            font-weight: SemiBold;
        }
        
        for metric in metrics: Rectangle {
            background: #f0fdf4;
            border-radius: 8px;
            padding: 16px;
            
            HorizontalBox {
                Text {
                    text: metric.name;
                    font-weight: SemiBold;
                    width: 120px;
                }
                
                Text {
                    text: metric.value + " " + metric.unit;
                    font-size: 20px;
                    font-weight: Bold;
                    color: #059669;
                }
                
                Text {
                    text: "vs " + metric.baseline + ": " + metric.baseline-value + " " + metric.unit;
                    color: #666;
                    horizontal-alignment: right;
                    flex-grow: 1;
                }
            }
        }
    }
}

// Placeholder Views
export component ResponsiveView {
    VerticalBox {
        Text {
            text: "Responsive Design Demonstrations";
            font-size: 18px;
            font-weight: SemiBold;
        }
        Text {
            text: "This section will demonstrate Slint's responsive layout capabilities with grid and flexbox examples.";
            wrap: word-wrap;
            color: #666;
        }
    }
}

export component AccessibilityView {
    VerticalBox {
        Text {
            text: "Accessibility Features";
            font-size: 18px;
            font-weight: SemiBold;
        }
        Text {
            text: "This section will demonstrate keyboard navigation, screen reader support, and WCAG compliance.";
            wrap: word-wrap;
            color: #666;
        }
    }
}

// Data Types
export struct Category {
    id: string,
    name: string,
    description: string,
    icon: string,
}

export struct Demo {
    id: string,
    title: string,
    category: string,
    difficulty: string,
}

export struct Metric {
    name: string,
    value: string,
    baseline: string,
    baseline-value: string,
    unit: string,
}
